# Maven Jar Analyzer MCP Service

Maven依赖分析和类反编译的MCP服务，支持远程调用。

## 功能特性

✅ **Maven依赖分析**

- 根据Maven坐标自动下载jar包及其依赖
- 支持私有Maven仓库和SNAPSHOT版本
- 批量查找指定的类

✅ **类反编译**

- 使用javap反编译Java字节码
- 获取完整的类结构信息
- 支持接口、抽象类、普通类

✅ **一站式服务**

- 查找+反编译一步到位
- 批量处理多个类
- JSON格式返回结果


## 📐 系统架构

### 架构图

```
┌─────────────────────────────────────────────────────────────┐
│                    Github Copilot IDE / MCP Client          │
│                  (MCP streamable_http 协议)                  │
└────────────────────────┬────────────────────────────────────┘
                         │ HTTP + JSON-RPC
                         │ Port: 8001
┌────────────────────────▼────────────────────────────────────┐
│              MCP Proxy Server (代理层)                       │
│              maven_jar_mcp_proxy.py                         │
│  ┌──────────────────────────────────────────────────────┐   │
│  │ - 接收 MCP JSON-RPC 请求 (initialize, tools/*)         │  │
│  │ - 转发请求到远程服务器                                   │  │
│  │ - 返回结构化 MCP 响应                                   │  │
│  │ - 支持健康检查和监控                                    │   │
│  └──────────────────────────────────────────────────────┘   │
└────────────────────────┬────────────────────────────────────┘
                         │ HTTP REST API
                         │ Port: 8000
┌────────────────────────▼────────────────────────────────────┐
│           Remote Maven Server (执行层)                       │
│           maven_jar_remote_server.py                        │
│  ┌──────────────────────────────────────────────────────┐   │
│  │ - 执行 Maven 命令                                      │   │
│  │ - 下载 JAR 包及依赖                                    │   │
│  │ - 搜索和定位类文件                                      │   │
│  │ - 反编译 Java 类 (CFR)                                │   │
│  └──────────────────────────────────────────────────────┘   │
└────────────────────────┬────────────────────────────────────┘
                         │ Maven CLI
                         │
┌────────────────────────▼────────────────────────────────────┐
│              Maven Repository (存储层)                       │
│  ┌──────────────────────────────────────────────────────┐   │
│  │ - Maven Central Repository                           │   │
│  │ - 私有 Maven 仓库 (可选)                               │   │
│  │ - 本地 Maven 缓存 (~/.m2/repository)                   │  │
│  └──────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘

```

---
## 安装部署

**v1版本**：https://github.com/jcxzzy/Maven-Jar-Analyzer/blob/main/v1/README.md

**v2版本**：https://github.com/jcxzzy/Maven-Jar-Analyzer/blob/main/v2/README.md

## 🎯 使用示例

```python
# 通过智能体使用
"请分析org.springframework.security.oauth:spring-security-oauth2:2.3.4.RELEASE，找到查找类：AuthorizationServerConfigurerAdapter类并反编译"

```

## 常见问题

### Q1: Maven下载失败怎么办？

A: 检查以下项：

1. Maven配置是否正确（`mvn --version`）
2. 网络连接是否正常
3. 仓库URL是否正确
4. 认证信息是否配置

### Q2: 找不到类怎么办？

A: 可能原因：

1. 类名拼写错误（支持简单类名，不需要包路径）
2. 版本不对，类不存在该版本中
3. jar包下载不完整

### Q3: 反编译失败怎么办？

A: 确保：

1. Java环境已正确安装（`java -version`）
2. javap命令可用
3. jar包文件完整且未损坏

## 性能优化

- 首次下载依赖会较慢，后续会使用Maven本地缓存
- 建议使用Maven镜像加速下载（配置settings.xml）
- 工作目录可复用，避免重复下载

## 贡献

欢迎提交Issue和Pull Request！

## 最后

⭐ 问题：如何让AI IDE读懂Maven依赖中的类？
答案：**Star这个项目！**